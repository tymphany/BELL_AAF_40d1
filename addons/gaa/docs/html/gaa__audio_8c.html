<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GAA Addon: services/voice_ui/gaa/gaa_audio.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GAA Addon
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('gaa__audio_8c.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">gaa_audio.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation for GAA audio.Refer to gsound_target_audio.h for API information.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7f3a5f44cac5e78a701b5ff0e11d538d"><td class="memItemLeft" align="right" valign="top"><a id="a7f3a5f44cac5e78a701b5ff0e11d538d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gaa__audio_8c.html#a7f3a5f44cac5e78a701b5ff0e11d538d">Gaa_AudioInClose</a> (void)</td></tr>
<tr class="memdesc:a7f3a5f44cac5e78a701b5ff0e11d538d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the GAA audio in. <br /></td></tr>
<tr class="separator:a7f3a5f44cac5e78a701b5ff0e11d538d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f9944d25f43f358c24790dd78da5bd0"><td class="memItemLeft" align="right" valign="top">TaskData *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gaa__audio_8c.html#a0f9944d25f43f358c24790dd78da5bd0">Gaa_GetAudioTask</a> (void)</td></tr>
<tr class="memdesc:a0f9944d25f43f358c24790dd78da5bd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the audio task for internal messaging.  <a href="#a0f9944d25f43f358c24790dd78da5bd0">More...</a><br /></td></tr>
<tr class="separator:a0f9944d25f43f358c24790dd78da5bd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abab2e9c1260c8c1039dd86ada7f8ecae"><td class="memItemLeft" align="right" valign="top">GSoundStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gaa__audio_8c.html#abab2e9c1260c8c1039dd86ada7f8ecae">GSoundTargetAudioInClose</a> (void)</td></tr>
<tr class="separator:abab2e9c1260c8c1039dd86ada7f8ecae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca87f5c9b74ca4aa5097962b0a3acb18"><td class="memItemLeft" align="right" valign="top">GSoundStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gaa__audio_8c.html#aca87f5c9b74ca4aa5097962b0a3acb18">GSoundTargetAudioInInit</a> (const GSoundAudioInterface *handler)</td></tr>
<tr class="separator:aca87f5c9b74ca4aa5097962b0a3acb18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac77994e4fb71aea4ec900365447338cc"><td class="memItemLeft" align="right" valign="top">GSoundStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gaa__audio_8c.html#ac77994e4fb71aea4ec900365447338cc">GSoundTargetAudioInOpen</a> (const <a class="el" href="struct_g_sound_target_audio_in_settings.html">GSoundTargetAudioInSettings</a> *audio_in_settings)</td></tr>
<tr class="separator:ac77994e4fb71aea4ec900365447338cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a315cd3ee9bc4b7e2010da9e4fe6ed2a9"><td class="memItemLeft" align="right" valign="top">GSoundStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gaa__audio_8c.html#a315cd3ee9bc4b7e2010da9e4fe6ed2a9">GSoundTargetAudioOutInit</a> (void)</td></tr>
<tr class="separator:a315cd3ee9bc4b7e2010da9e4fe6ed2a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f750d31a7b624128e1fef09e74f5bc8"><td class="memItemLeft" align="right" valign="top">GSoundStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gaa__audio_8c.html#a1f750d31a7b624128e1fef09e74f5bc8">GSoundTargetAudioOutStart</a> (GSoundTargetAudioOutClip clip)</td></tr>
<tr class="separator:a1f750d31a7b624128e1fef09e74f5bc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab26ebd9adcfae6f3572fd2f767e88f8d"><td class="memItemLeft" align="right" valign="top">GSoundStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gaa__audio_8c.html#ab26ebd9adcfae6f3572fd2f767e88f8d">GSoundTargetAudioPrepareForStreaming</a> (const <a class="el" href="struct_g_sound_target_audio_streaming_settings.html">GSoundTargetAudioStreamingSettings</a> *settings)</td></tr>
<tr class="separator:ab26ebd9adcfae6f3572fd2f767e88f8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4116922fdd4637614bea1791e89095be"><td class="memItemLeft" align="right" valign="top">GSoundStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gaa__audio_8c.html#a4116922fdd4637614bea1791e89095be">GSoundTargetSetSidetone</a> (bool sidetone_enabled)</td></tr>
<tr class="separator:a4116922fdd4637614bea1791e89095be"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation for GAA audio.Refer to gsound_target_audio.h for API information. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2018-2019 Qualcomm Technologies International, Ltd. All Rights Reserved. Qualcomm Technologies International, Ltd. Confidential and Proprietary. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a0f9944d25f43f358c24790dd78da5bd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f9944d25f43f358c24790dd78da5bd0">&#9670;&nbsp;</a></span>Gaa_GetAudioTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TaskData* Gaa_GetAudioTask </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the audio task for internal messaging. </p>
<dl class="section return"><dt>Returns</dt><dd>TaskData * audio task </dd></dl>

</div>
</div>
<a id="abab2e9c1260c8c1039dd86ada7f8ecae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abab2e9c1260c8c1039dd86ada7f8ecae">&#9670;&nbsp;</a></span>GSoundTargetAudioInClose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GSoundStatus GSoundTargetAudioInClose </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close the Microphone audio input path and side-tone. After this call, GSound should no longer receive audio frames.</p>
<p>Note, If Audio In is already closed when this function is called, Target should do nothing and return GSOUND_STATUS_SUCCESS. </p>

</div>
</div>
<a id="aca87f5c9b74ca4aa5097962b0a3acb18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca87f5c9b74ca4aa5097962b0a3acb18">&#9670;&nbsp;</a></span>GSoundTargetAudioInInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GSoundStatus GSoundTargetAudioInInit </td>
          <td>(</td>
          <td class="paramtype">const GSoundAudioInterface *&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize Microphone Audio Input path.</p>
<p>Audio In should only come from the Microphone. This is used to capture Voice Input which will be used as a Google Assistant Query.</p>
<p>The Audio must be SBC encoded. For SBC, we require that the header is removed from each audio frame. </p>

</div>
</div>
<a id="ac77994e4fb71aea4ec900365447338cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac77994e4fb71aea4ec900365447338cc">&#9670;&nbsp;</a></span>GSoundTargetAudioInOpen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GSoundStatus GSoundTargetAudioInOpen </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_g_sound_target_audio_in_settings.html">GSoundTargetAudioInSettings</a> *&#160;</td>
          <td class="paramname"><em>audio_in_settings</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open the Microphone audio input port and start streaming SBC encoded audio frames to GSound using the appropriate callback Interface above. If the <code>sidetone_required</code> field is true, target must also provide a side-tone to speakers so user can hear their voice while speaking.</p>
<p>Note that sidetone may also be enabled or disabled from the GSoundTargetSetSidetone API.</p>
<p>GSoundTargetAudioInOpen may be called several times in succession without any calls to GSoundTargetAudioInClose. In these cases it is up to the target to apply any updated parameters from the audio_in_settings argument.</p>
<p>param[in]: audio_in_settings SBC encoder settings. Refer to <a class="el" href="struct_g_sound_target_audio_in_settings.html">GSoundTargetAudioInSettings</a> definition for more detail. </p>

</div>
</div>
<a id="a315cd3ee9bc4b7e2010da9e4fe6ed2a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a315cd3ee9bc4b7e2010da9e4fe6ed2a9">&#9670;&nbsp;</a></span>GSoundTargetAudioOutInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GSoundStatus GSoundTargetAudioOutInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize Audio Playback subsystem </p>

</div>
</div>
<a id="a1f750d31a7b624128e1fef09e74f5bc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f750d31a7b624128e1fef09e74f5bc8">&#9670;&nbsp;</a></span>GSoundTargetAudioOutStart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GSoundStatus GSoundTargetAudioOutStart </td>
          <td>(</td>
          <td class="paramtype">GSoundTargetAudioOutClip&#160;</td>
          <td class="paramname"><em>clip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Play audio clip provided. Target should have a WAV, MP3, etc. file embedded in the application. Use the clip parameter to determine which file to play.</p>
<p>Note: This function must be non-blocking. It will be called from a thread context.</p>
<p>Note: In case of a TWS system - target layer must be capable of playing audio and voice prompts on both master and slave when prompted from this API on master.</p>
<p>param[in]: clip: Audio clip to play back to user. Each clip should refer to a unique wav file. </p>

</div>
</div>
<a id="ab26ebd9adcfae6f3572fd2f767e88f8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab26ebd9adcfae6f3572fd2f767e88f8d">&#9670;&nbsp;</a></span>GSoundTargetAudioPrepareForStreaming()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GSoundStatus GSoundTargetAudioPrepareForStreaming </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_g_sound_target_audio_streaming_settings.html">GSoundTargetAudioStreamingSettings</a> *&#160;</td>
          <td class="paramname"><em>settings</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The target should perform any preparation necessary to enable high-throughput audio streaming over BT/BLE. This includes any configurations required to BT, BLE, MCU clock rate, etc.</p>
<p>The target should remain in this state until a call to GSoundTargetAudioInClose.</p>
<p>Note, if a Target does not require any custom configuration to enable high throughput streaming, simply return GSOUND_STATUS_OK.</p>
<p>param[in]: settings Pointer to audio streaming settings. The content of this structure must be fully consumed before this function returns. Target must retain any information from this parameter to reuse during GSoundTargetAudioInClose. Refer to type <a class="el" href="struct_g_sound_target_audio_streaming_settings.html">GSoundTargetAudioStreamingSettings</a> for more information. </p>

</div>
</div>
<a id="a4116922fdd4637614bea1791e89095be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4116922fdd4637614bea1791e89095be">&#9670;&nbsp;</a></span>GSoundTargetSetSidetone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GSoundStatus GSoundTargetSetSidetone </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>sidetone_enabled</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>API to enable/disable sidetone when the microphone is already open.</p>
<p>Target should not interrupt or alter the audio input stream when enabling or disabling sidetone through this API.</p>
<p>Note that this API will only be called when the microphone has been opened by GSoundTargetAudioInOpen.</p>
<p>Also note that GSoundTargetAudioInOpen may also enable sidetone without calling this API.</p>
<p>param[in]: sidetone_enabled true enable sidetone. If sidetone is already enabled then ignore.</p>
<p>false disable sidetone. If sidetone is already disabled then ignore. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_056ec8f0377ddc4293192cbc6b19c99c.html">services</a></li><li class="navelem"><a class="el" href="dir_aae6b84e6fb67d358742886527813b07.html">voice_ui</a></li><li class="navelem"><a class="el" href="dir_023b046919b6901bbf2fdb9cc8a89c6a.html">gaa</a></li><li class="navelem"><a class="el" href="gaa__audio_8c.html">gaa_audio.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
